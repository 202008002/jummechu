<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
<title> 점메추, 직장인 점심메뉴 룰렛 </title>
</head>
        
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
<body>
<p>
<h1> 오늘 점심은 뭘 먹을까? </h1>
</p>

<p style="margin-top:-12px">

</p>
<div id="map" style="width:500px;height:400px;"></div>


   
<script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=e39d7818fa41de98942eb619a2073e61&libraries=services"></script>
<script>

	
	const getCurrentCoordinate = async () => {
  console.log("getCurrentCoordinate 함수 실행!!!");
  return new Promise((res, rej) => {
    // HTML5의 geolocaiton으로 사용할 수 있는지 확인합니다.
    if (navigator.geolocation) {
      // GeoLocation을 이용해서 접속 위치를 얻어옵니다.
      navigator.geolocation.getCurrentPosition(function (position) {
        console.log(position);
        const lat = position.coords.latitude; // 위도
        const lon = position.coords.longitude; // 경도

        const coordinate = new kakao.maps.LatLng(lat, lon);
        res(coordinate);
      });
    } else {
      rej(new Error("현재 위치를 불러올 수 없습니다."));
    }
  });
};

	
  async function searchPlaces() {
        console.log("searchPlaces 실행!!!");
        var keyword = "맛집";
        const currentCoordinate = await getCurrentCoordinate();
        console.log(currentCoordinate);
        var options = {
          location: currentCoordinate,
          radius: 10000,
          sort: kakao.maps.services.SortBy.DISTANCE,
        };

        // 장소검색 객체를 통해 키워드로 장소검색을 요청합니다
        ps.keywordSearch(keyword, placesSearchCB, options);
      }

	
</script>
</body>
</html>
